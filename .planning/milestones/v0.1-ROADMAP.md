# Roadmap Archive: Event Deduplication Service v0.1

**Archived:** 2026-02-28
**Timeline:** 2026-02-27 to 2026-02-28
**Commits:** 75
**Codebase:** 74 Python files (6,492 LOC), 18 TypeScript files (2,085 LOC), 28 test files (371 tests)

## Overview

This roadmap took the event deduplication service from zero to a fully operational system that ingests JSON event files, deduplicates them with high accuracy using tiered matching (fast deterministic + Gemini Flash AI), maintains a canonical event database in PostgreSQL, and provides a frontend for browsing, searching, and manually reviewing event groupings.

## Key Accomplishments

1. **Multi-signal deduplication pipeline** -- 4-signal scoring (date, geo, title, description) with blocking for >95% candidate reduction, graph-based clustering, and canonical event synthesis with field provenance
2. **AI-assisted matching** -- Gemini Flash integration resolves ambiguous pairs with content-hash caching and cost tracking
3. **Full-stack deployment** -- Docker containers (worker, API, frontend, PostgreSQL) with docker-compose, file watcher, and structured logging
4. **Browse & review frontend** -- React + TanStack Query UI with search/filter, source comparison, split/merge operations, review queue, audit trail, and processing dashboard
5. **German-specific accuracy refinement** -- Dialect synonym normalization, category-aware scoring weights, and source-type-aware title comparison

## Phases

| Phase | Plans | Duration | Completed |
|-------|-------|----------|-----------|
| 1. Foundation & Ground Truth | 4/4 | ~20m | 2026-02-27 |
| 2. Core Matching Pipeline | 4/4 | ~17m | 2026-02-28 |
| 3. Pipeline Integration & Deployment | 2/2 | ~7m | 2026-02-28 |
| 4. API & Browse Frontend | 2/2 | ~13m | 2026-02-28 |
| 5. AI-Assisted Matching | 2/2 | ~7m | 2026-02-28 |
| 6. Manual Review & Operations | 2/2 | ~10m | 2026-02-28 |
| 7. Accuracy Refinement | 2/2 | ~9m | 2026-02-28 |
| **Total** | **18/18** | **~1.25h** | |

## Phase Details

### Phase 1: Foundation & Ground Truth
**Goal**: Ingest event JSON files into PostgreSQL with full preprocessing; labeled ground truth dataset enables objective accuracy measurement
**Requirements**: EVAL-01, EVAL-02, EVAL-03, PIPE-02, PIPE-03, PIPE-04
**Plans**:
- 01-01: Project setup, database schema, SQLAlchemy models, Alembic migrations, JSON ingestion with idempotency
- 01-02: Text normalization (umlauts, prefixes, city aliases), blocking key generation, preprocessing integration
- 01-03: Ground truth candidate generator, CLI labeling tool, evaluation harness (precision/recall/F1)
- 01-04: Auto-generated ground truth dataset (1181 labeled pairs via conservative multi-signal heuristics)

### Phase 2: Core Matching Pipeline
**Goal**: Accurate deduplication using multi-signal scoring and graph-based clustering, producing canonical events
**Requirements**: MTCH-01, MTCH-02, MTCH-03, MTCH-04, MTCH-05, MTCH-06, MTCH-10, CANL-01, CANL-02, CANL-03, CANL-04
**Plans**:
- 02-01: Database models, matching config (YAML + Pydantic), signal scorers, weighted combiner
- 02-02: Candidate pair generator using blocking keys, matching pipeline orchestrator
- 02-03: Graph-based clustering with networkx connected_components, cluster coherence validation
- 02-04: Canonical event synthesis with field strategies and provenance, enrichment engine, full pipeline orchestrator

### Phase 3: Pipeline Integration & Deployment
**Goal**: Complete pipeline runs as Docker containers, automatically processing new JSON files
**Requirements**: PIPE-01, PIPE-05, DEPL-01, DEPL-02, DEPL-03
**Plans**:
- 03-01: Pipeline worker service: file watcher, orchestrator, canonical persistence, structured logging
- 03-02: Docker infrastructure: Dockerfiles, docker-compose.yml, entrypoint with Alembic, FastAPI skeleton

### Phase 4: API & Browse Frontend
**Goal**: Users can search, browse, and inspect canonical events through a web interface
**Requirements**: UI-01, UI-02, UI-03, UI-04
**Plans**:
- 04-01: FastAPI REST API: Pydantic schemas, route structure, pg_trgm search, date range filtering
- 04-02: React frontend: Vite + TypeScript + TanStack Query, event list/detail/source comparison

### Phase 5: AI-Assisted Matching
**Goal**: Ambiguous pairs resolved by Gemini Flash, improving accuracy on the hardest cases
**Requirements**: AI-01, AI-02, AI-03, AI-04, AI-05
**Plans**:
- 05-01: AI matching infrastructure: google-genai SDK, Gemini client, content-hash cache, cost tracker
- 05-02: Pipeline integration: resolver orchestrator, evaluation harness comparison, Docker env config

### Phase 6: Manual Review & Operations
**Goal**: Operators can correct grouping mistakes and monitor system health
**Requirements**: REV-01, REV-02, REV-03, REV-04, REV-05
**Plans**:
- 06-01: AuditLog model, review operations service (split/merge), API routes, API tests
- 06-02: Review queue page, split/merge dialogs, dashboard page, audit trail component

### Phase 7: Accuracy Refinement
**Goal**: Matching accuracy improved for German-specific edge cases
**Requirements**: MTCH-07, MTCH-08, MTCH-09
**Plans**:
- 07-01: German dialect synonym dictionary + source-type-aware title scoring
- 07-02: Category-aware matching weights + category-specific F1 evaluation

## Performance

- 18 plans completed in ~1.25 hours
- Average plan execution: 4.1 minutes
- 371 tests, all passing
- 75 git commits

## Milestone Audit

Audit passed on 2026-02-28:
- 39/39 requirements implemented
- 8/8 cross-phase integrations verified
- 6/6 end-to-end flows validated
- See: v0.1-MILESTONE-AUDIT.md

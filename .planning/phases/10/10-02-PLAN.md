# Phase 10, Plan 2: Frontend — Config Page Updates for Time Gap & Venue Matching

## Goal
Add the new time gap penalty and venue matching config fields to the frontend TypeScript types and config page UI, so operators can view and edit them.

## Requirements Covered
- **TGP-02**: Time gap penalty parameters editable via frontend config page
- **NEW**: Venue matching parameters editable via frontend config page

## Files to Modify
1. `frontend/src/types/index.ts` — add 2 fields to DateConfig, 2 fields to GeoConfig
2. `frontend/src/components/ConfigPage.tsx` — add NumberField inputs in DateTimeSection and GeoSection

## Tasks

### Task 1: TypeScript types update

**File:** `frontend/src/types/index.ts`

**What:** Add the new backend fields to the DateConfig and GeoConfig interfaces.

**Details:**

In `DateConfig` (line 198-203), add the two new fields:
```typescript
export interface DateConfig {
  time_tolerance_minutes: number;
  time_close_minutes: number;
  close_factor: number;
  far_factor: number;
  time_gap_penalty_hours: number;
  time_gap_penalty_factor: number;
}
```

In `GeoConfig` (line 192-196), add the two new fields:
```typescript
export interface GeoConfig {
  max_distance_km: number;
  min_confidence: number;
  neutral_score: number;
  venue_match_distance_km: number;
  venue_mismatch_factor: number;
}
```

### Task 2: DateTimeSection config fields

**File:** `frontend/src/components/ConfigPage.tsx`

**What:** Add two new NumberField inputs to the DateTimeSection for the time gap penalty parameters.

**Details:**

In the DateTimeSection component (line 222-247), add two new NumberField components inside the grid div, AFTER the existing "Far time factor" field (after line 246):

```tsx
        <NumberField
          label="Gap penalty threshold (hours)"
          value={dateConfig.time_gap_penalty_hours}
          onChange={(v) => setDateConfig((p) => ({ ...p, time_gap_penalty_hours: v }))}
          step="0.5"
          min="0.5"
          note="Time gaps beyond this trigger the penalty factor"
        />
        <NumberField
          label="Gap penalty factor"
          value={dateConfig.time_gap_penalty_factor}
          onChange={(v) => setDateConfig((p) => ({ ...p, time_gap_penalty_factor: v }))}
          max="1.0"
          note="Score multiplier for time gaps beyond threshold"
        />
```

### Task 3: GeoSection config fields

**File:** `frontend/src/components/ConfigPage.tsx`

**What:** Add two new NumberField inputs to the GeoSection for the venue matching parameters.

**Details:**

In the GeoSection component (line 273-293), add two new NumberField components inside the grid div, AFTER the existing "Neutral score" field (after line 291):

```tsx
        <NumberField
          label="Venue match distance (km)"
          value={geo.venue_match_distance_km}
          onChange={(v) => setGeo((p) => ({ ...p, venue_match_distance_km: v }))}
          step="0.5"
          min="0.1"
          note="Compare venue names when events are closer than this"
        />
        <NumberField
          label="Venue mismatch factor"
          value={geo.venue_mismatch_factor}
          onChange={(v) => setGeo((p) => ({ ...p, venue_mismatch_factor: v }))}
          max="1.0"
          note="Score multiplier when venue names clearly differ"
        />
```

## Verification

Check that TypeScript compiles without errors:
```bash
cd frontend && npx tsc --noEmit
```

Start the frontend dev server and verify visually:
```bash
cd frontend && npm run dev
```

Visual checks:
1. **Config > Date / Time section**: Shows 6 fields (4 existing + 2 new). The "Gap penalty threshold" and "Gap penalty factor" fields display with their help notes.
2. **Config > Geographic section**: Shows 5 fields (3 existing + 2 new). The "Venue match distance" and "Venue mismatch factor" fields display with their help notes.
3. **Save**: Editing a new field and saving should persist via PATCH API. Refreshing the page should show the saved value.

## Dependencies
- Plan 1 (10-01) must be complete — the backend DateConfig and GeoConfig must include the new fields for the API to return them

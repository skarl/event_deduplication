---
phase: 04-api-frontend
plan: 02
type: execute
wave: 2
depends_on: [04-01]
files_modified:
  - frontend/package.json
  - frontend/tsconfig.json
  - frontend/tsconfig.app.json
  - frontend/tsconfig.node.json
  - frontend/vite.config.ts
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/index.css
  - frontend/src/api/client.ts
  - frontend/src/types/index.ts
  - frontend/src/hooks/useCanonicalEvents.ts
  - frontend/src/components/EventList.tsx
  - frontend/src/components/EventDetail.tsx
  - frontend/src/components/SourceComparison.tsx
  - frontend/src/components/ConfidenceIndicator.tsx
  - frontend/src/components/SearchFilters.tsx
  - frontend/src/components/Pagination.tsx
  - docker/Dockerfile.frontend
  - docker/nginx.conf
  - docker-compose.yml
autonomous: true
requirements: [UI-01, UI-02, UI-03, UI-04]

must_haves:
  truths:
    - "User can see a paginated list of canonical events with title, city, source count, and match confidence"
    - "User can search events by title and filter by city, date range, and category"
    - "User can click a canonical event to see its full details (title, description, highlights, dates, location, categories, flags)"
    - "User can see all contributing source events in a comparison layout within the detail view"
    - "User can see match confidence indicators showing per-source signal scores (title similarity, geo distance, date match, description match)"
    - "User can navigate between list and detail views using browser back/forward"
    - "Frontend is served via Nginx that proxies /api/ to the FastAPI container"
  artifacts:
    - path: "frontend/src/components/EventList.tsx"
      provides: "Searchable paginated canonical event list (UI-01)"
      min_lines: 80
    - path: "frontend/src/components/EventDetail.tsx"
      provides: "Canonical event detail view (UI-02)"
      min_lines: 60
    - path: "frontend/src/components/SourceComparison.tsx"
      provides: "Side-by-side source event comparison (UI-03)"
      min_lines: 50
    - path: "frontend/src/components/ConfidenceIndicator.tsx"
      provides: "Match confidence score display (UI-04)"
      min_lines: 20
    - path: "frontend/src/api/client.ts"
      provides: "API client for fetching canonical events"
      exports: "fetchCanonicalEvents, fetchCanonicalEventDetail"
    - path: "docker/Dockerfile.frontend"
      provides: "Multi-stage Docker build (Node build + Nginx serve)"
    - path: "docker/nginx.conf"
      provides: "Nginx reverse proxy config (/ -> React, /api/ -> FastAPI)"
    - path: "docker-compose.yml"
      provides: "Updated frontend service using Dockerfile.frontend"
  key_links:
    - from: "frontend/src/api/client.ts"
      to: "/api/canonical-events"
      via: "fetch with relative URL"
      pattern: "fetch.*api/canonical-events"
    - from: "frontend/src/hooks/useCanonicalEvents.ts"
      to: "frontend/src/api/client.ts"
      via: "TanStack Query hooks calling API client"
      pattern: "useQuery.*fetchCanonical"
    - from: "frontend/src/App.tsx"
      to: "frontend/src/components/EventList.tsx"
      via: "React Router route"
      pattern: "Route.*EventList"
    - from: "docker/nginx.conf"
      to: "api:8000"
      via: "proxy_pass for /api/"
      pattern: "proxy_pass.*api:8000"
---

<objective>
Build the React frontend SPA that provides search, browse, and detail views for canonical events, plus the Docker/Nginx infrastructure to serve it.

Purpose: This is the user-facing layer that makes the deduplication data accessible. Without it, canonical events only exist in the database with no way to browse or inspect them. The frontend consumes the REST API built in Plan 04-01.

Output: Complete React SPA with Vite + TypeScript + TanStack Query + Tailwind CSS, served via Nginx with API reverse proxy, integrated into docker-compose.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04/04-RESEARCH.md
@.planning/phases/04/04-01-SUMMARY.md

@src/event_dedup/api/schemas.py
@src/event_dedup/api/routes/canonical_events.py
@docker-compose.yml
@docker/Dockerfile.api

<interfaces>
<!-- API contract from Plan 04-01 that the frontend consumes -->

GET /api/canonical-events?q=&city=&date_from=&date_to=&category=&page=1&size=20
Response: PaginatedResponse[CanonicalEventSummary]
```json
{
  "items": [
    {
      "id": 1,
      "title": "Fasching in Freiburg",
      "location_city": "Freiburg",
      "dates": [{"date": "2026-02-15", "start_time": "14:00"}],
      "categories": ["fasching", "karneval"],
      "source_count": 2,
      "match_confidence": 0.85,
      "needs_review": false
    }
  ],
  "total": 42,
  "page": 1,
  "size": 20,
  "pages": 3
}
```

GET /api/canonical-events/{id}
Response: CanonicalEventDetail
```json
{
  "id": 1,
  "title": "Fasching in Freiburg",
  "short_description": "...",
  "description": "...",
  "highlights": ["..."],
  "location_name": "...",
  "location_city": "Freiburg",
  "location_district": null,
  "location_street": null,
  "location_zipcode": null,
  "geo_latitude": 48.0,
  "geo_longitude": 7.8,
  "geo_confidence": 0.9,
  "dates": [{"date": "2026-02-15", "start_time": "14:00"}],
  "categories": ["fasching", "karneval"],
  "is_family_event": true,
  "is_child_focused": false,
  "admission_free": true,
  "field_provenance": {"title": "pdf-aaa-0-0"},
  "source_count": 2,
  "match_confidence": 0.85,
  "needs_review": false,
  "sources": [
    {
      "id": "pdf-aaa-0-0",
      "title": "Fasching in Freiburg",
      "short_description": "...",
      "description": "...",
      "highlights": [],
      "location_name": "...",
      "location_city": "Freiburg",
      "source_type": "artikel",
      "source_code": "bwb",
      "categories": ["fasching"],
      "dates": [{"date": "2026-02-15", "start_time": "14:00"}]
    }
  ],
  "match_decisions": [
    {
      "id": 1,
      "source_event_id_a": "pdf-aaa-0-0",
      "source_event_id_b": "pdf-bbb-0-0",
      "combined_score": 0.85,
      "date_score": 0.95,
      "geo_score": 1.0,
      "title_score": 0.72,
      "description_score": 0.60,
      "decision": "match",
      "tier": "deterministic"
    }
  ]
}
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold React project with Vite, TypeScript, Tailwind, TanStack Query, and React Router</name>
  <files>
    frontend/package.json
    frontend/tsconfig.json
    frontend/tsconfig.app.json
    frontend/tsconfig.node.json
    frontend/vite.config.ts
    frontend/index.html
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/index.css
    frontend/src/api/client.ts
    frontend/src/types/index.ts
    frontend/src/hooks/useCanonicalEvents.ts
  </files>
  <action>
    **1. Scaffold the Vite React project:**

    ```bash
    cd /Users/svenkarl/workspaces/event-deduplication
    npm create vite@latest frontend -- --template react-ts
    cd frontend
    npm install @tanstack/react-query react-router-dom date-fns
    npm install -D tailwindcss @tailwindcss/vite
    ```

    **2. Configure Vite** (`frontend/vite.config.ts`):

    ```typescript
    import { defineConfig } from 'vite';
    import react from '@vitejs/plugin-react';
    import tailwindcss from '@tailwindcss/vite';

    export default defineConfig({
      plugins: [react(), tailwindcss()],
      server: {
        proxy: {
          '/api': {
            target: 'http://localhost:8000',
            changeOrigin: true,
          },
        },
      },
    });
    ```

    **3. Configure Tailwind CSS** (`frontend/src/index.css`):

    Replace contents with:
    ```css
    @import "tailwindcss";
    ```

    **4. Create TypeScript types** (`frontend/src/types/index.ts`):

    Define types matching the API response schemas:

    ```typescript
    export interface EventDate {
      date: string;
      start_time: string | null;
      end_time: string | null;
      end_date: string | null;
    }

    export interface CanonicalEventSummary {
      id: number;
      title: string;
      location_city: string | null;
      dates: EventDate[] | null;
      categories: string[] | null;
      source_count: number;
      match_confidence: number | null;
      needs_review: boolean;
    }

    export interface SourceEventDetail {
      id: string;
      title: string;
      short_description: string | null;
      description: string | null;
      highlights: string[] | null;
      location_name: string | null;
      location_city: string | null;
      location_district: string | null;
      location_street: string | null;
      location_street_no: string | null;
      location_zipcode: string | null;
      geo_latitude: number | null;
      geo_longitude: number | null;
      geo_confidence: number | null;
      source_type: string;
      source_code: string;
      categories: string[] | null;
      is_family_event: boolean | null;
      is_child_focused: boolean | null;
      admission_free: boolean | null;
      dates: EventDate[];
    }

    export interface MatchDecision {
      id: number;
      source_event_id_a: string;
      source_event_id_b: string;
      combined_score: number;
      date_score: number;
      geo_score: number;
      title_score: number;
      description_score: number;
      decision: string;
      tier: string;
    }

    export interface CanonicalEventDetail {
      id: number;
      title: string;
      short_description: string | null;
      description: string | null;
      highlights: string[] | null;
      location_name: string | null;
      location_city: string | null;
      location_district: string | null;
      location_street: string | null;
      location_zipcode: string | null;
      geo_latitude: number | null;
      geo_longitude: number | null;
      geo_confidence: number | null;
      dates: EventDate[] | null;
      categories: string[] | null;
      is_family_event: boolean | null;
      is_child_focused: boolean | null;
      admission_free: boolean | null;
      field_provenance: Record<string, string> | null;
      source_count: number;
      match_confidence: number | null;
      needs_review: boolean;
      sources: SourceEventDetail[];
      match_decisions: MatchDecision[];
    }

    export interface PaginatedResponse<T> {
      items: T[];
      total: number;
      page: number;
      size: number;
      pages: number;
    }

    export interface EventFilters {
      q?: string;
      city?: string;
      date_from?: string;
      date_to?: string;
      category?: string;
    }
    ```

    **5. Create API client** (`frontend/src/api/client.ts`):

    ```typescript
    import type { CanonicalEventDetail, CanonicalEventSummary, EventFilters, PaginatedResponse } from '../types';

    const API_BASE = '/api';

    export async function fetchCanonicalEvents(
      filters: EventFilters,
      page: number = 1,
      size: number = 20,
    ): Promise<PaginatedResponse<CanonicalEventSummary>> {
      const params = new URLSearchParams();
      params.set('page', String(page));
      params.set('size', String(size));
      if (filters.q) params.set('q', filters.q);
      if (filters.city) params.set('city', filters.city);
      if (filters.date_from) params.set('date_from', filters.date_from);
      if (filters.date_to) params.set('date_to', filters.date_to);
      if (filters.category) params.set('category', filters.category);

      const res = await fetch(`${API_BASE}/canonical-events?${params}`);
      if (!res.ok) throw new Error(`API error: ${res.status}`);
      return res.json();
    }

    export async function fetchCanonicalEventDetail(id: number): Promise<CanonicalEventDetail> {
      const res = await fetch(`${API_BASE}/canonical-events/${id}`);
      if (!res.ok) throw new Error(`API error: ${res.status}`);
      return res.json();
    }
    ```

    **6. Create TanStack Query hooks** (`frontend/src/hooks/useCanonicalEvents.ts`):

    ```typescript
    import { useQuery, keepPreviousData } from '@tanstack/react-query';
    import { fetchCanonicalEvents, fetchCanonicalEventDetail } from '../api/client';
    import type { EventFilters } from '../types';

    export function useCanonicalEvents(filters: EventFilters, page: number, size: number = 20) {
      return useQuery({
        queryKey: ['canonical-events', filters, page, size],
        queryFn: () => fetchCanonicalEvents(filters, page, size),
        placeholderData: keepPreviousData,
      });
    }

    export function useCanonicalEventDetail(id: number) {
      return useQuery({
        queryKey: ['canonical-event', id],
        queryFn: () => fetchCanonicalEventDetail(id),
        enabled: id > 0,
      });
    }
    ```

    **7. Set up App with React Router and TanStack Query** (`frontend/src/App.tsx`):

    ```typescript
    import { BrowserRouter, Routes, Route } from 'react-router-dom';
    import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
    import { EventList } from './components/EventList';
    import { EventDetail } from './components/EventDetail';

    const queryClient = new QueryClient({
      defaultOptions: {
        queries: {
          staleTime: 30_000,
          retry: 1,
        },
      },
    });

    export default function App() {
      return (
        <QueryClientProvider client={queryClient}>
          <BrowserRouter>
            <div className="min-h-screen bg-gray-50">
              <header className="bg-white shadow-sm border-b">
                <div className="max-w-7xl mx-auto px-4 py-4">
                  <h1 className="text-xl font-semibold text-gray-900">
                    <a href="/" className="hover:text-blue-600">Event Deduplication</a>
                  </h1>
                </div>
              </header>
              <main className="max-w-7xl mx-auto px-4 py-6">
                <Routes>
                  <Route path="/" element={<EventList />} />
                  <Route path="/events/:id" element={<EventDetail />} />
                </Routes>
              </main>
            </div>
          </BrowserRouter>
        </QueryClientProvider>
      );
    }
    ```

    **8. Update `frontend/src/main.tsx`** to import index.css and render App:

    ```typescript
    import { StrictMode } from 'react';
    import { createRoot } from 'react-dom/client';
    import App from './App';
    import './index.css';

    createRoot(document.getElementById('root')!).render(
      <StrictMode>
        <App />
      </StrictMode>,
    );
    ```

    Delete the default Vite boilerplate files: `frontend/src/App.css`, `frontend/src/assets/`, any `*.svg` files in `src/`. Keep it clean.
  </action>
  <verify>
    <automated>cd /Users/svenkarl/workspaces/event-deduplication/frontend && npm run build 2>&1 | tail -5</automated>
  </verify>
  <done>
    - Vite React project scaffolded with TypeScript
    - TanStack Query, React Router, date-fns installed
    - Tailwind CSS configured with @tailwindcss/vite plugin
    - TypeScript types match API response schemas
    - API client with fetch wrapper for both endpoints
    - TanStack Query hooks for list (with pagination) and detail
    - App.tsx with router setup and basic layout shell
    - `npm run build` succeeds without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Build React UI components for all four requirements</name>
  <files>
    frontend/src/components/SearchFilters.tsx
    frontend/src/components/Pagination.tsx
    frontend/src/components/EventList.tsx
    frontend/src/components/EventDetail.tsx
    frontend/src/components/SourceComparison.tsx
    frontend/src/components/ConfidenceIndicator.tsx
  </files>
  <action>
    Build all UI components using Tailwind CSS utility classes. No shadcn/ui installation needed for this scope -- use hand-crafted Tailwind components to keep dependencies minimal. Desktop-first (mobile responsiveness is out of scope per REQUIREMENTS.md).

    **1. Create `frontend/src/components/SearchFilters.tsx`** (used by EventList):

    A filter bar component with:
    - Text input for title search (`q` param) with a "Search" button or Enter key submission
    - Text input for city filter
    - Two date inputs (date_from, date_to) using native `<input type="date">`
    - Text input for category filter
    - A "Clear" button to reset all filters
    - Component accepts `filters: EventFilters`, `onFiltersChange: (filters: EventFilters) => void` props
    - Use local state for form inputs, call `onFiltersChange` on submit (not on every keystroke -- avoid excessive API calls)
    - Layout: horizontal bar with inputs in a row, using Tailwind `flex gap-3 items-end`

    **2. Create `frontend/src/components/Pagination.tsx`**:

    A pagination component with:
    - Previous/Next buttons
    - Current page and total pages display: "Page X of Y (Z results)"
    - Props: `page: number`, `pages: number`, `total: number`, `onPageChange: (page: number) => void`
    - Disable Previous on page 1, disable Next on last page
    - Tailwind styling: `flex items-center justify-between` with button styling

    **3. Create `frontend/src/components/EventList.tsx`** (UI-01):

    The main list view:
    - Uses `useCanonicalEvents` hook with filters and page state
    - Renders `SearchFilters` at top
    - Shows loading state ("Loading events...") and error state
    - Renders canonical events as a table or card list:
      - Each row/card shows: title (as link to `/events/{id}`), location_city, first date (formatted with date-fns), categories as badges, source_count, match_confidence as percentage, needs_review indicator
      - Use a table layout for desktop: `<table>` with Tailwind `w-full` styling
      - Table columns: Title, City, Date, Categories, Sources, Confidence, Review
    - Renders `Pagination` at bottom
    - URL state: store page and filters in URL search params using `useSearchParams` from react-router-dom so that browser back/forward works
    - When filters change, reset page to 1

    Format dates using `date-fns`: `format(parseISO(dateStr), 'dd.MM.yyyy')` (German format).
    Format confidence as percentage: `Math.round(confidence * 100) + '%'`
    Categories as small colored badges: `<span className="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded">category</span>`
    needs_review: show a yellow warning badge "Review" if true

    **4. Create `frontend/src/components/ConfidenceIndicator.tsx`** (UI-04):

    Component to display match confidence scores:
    - Props: `decisions: MatchDecision[]`, `sourceIds: string[]`
    - For each match decision, render a row showing:
      - Source A ID (truncated, e.g., last 8 chars) vs Source B ID
      - Score bars for each signal: title_score, date_score, geo_score, description_score, combined_score
      - Each score as a horizontal bar (width proportional to 0-1 value) with percentage label
      - Color coding: green (>= 0.8), yellow (0.5-0.8), red (< 0.5)
    - If no decisions (singleton event), show "Single source -- no match scores"
    - Use Tailwind for the bars: `<div className="bg-gray-200 rounded h-4"><div className="bg-green-500 rounded h-4" style={{width: `${score*100}%`}}></div></div>`

    **5. Create `frontend/src/components/SourceComparison.tsx`** (UI-03):

    Side-by-side source event comparison:
    - Props: `sources: SourceEventDetail[]`
    - Render source events in a grid layout: `grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4`
    - Each source event card shows:
      - Header: source_type badge ("artikel" / "terminliste") + source_code + event ID (truncated)
      - Title
      - Short description (if present)
      - Description (truncated to ~200 chars with "Show more" toggle)
      - Location: city, name, street
      - Dates: formatted list
      - Categories as badges
      - Boolean flags: family event, child-focused, admission free (only show if true)
    - Highlight differences between sources: if a field differs across sources, add a subtle visual indicator (e.g., a colored left border on the card or a diff icon). Simple approach: compare each source's title against the first source -- if different, add `border-l-4 border-amber-400`.

    **6. Create `frontend/src/components/EventDetail.tsx`** (UI-02, UI-03, UI-04):

    The detail view page:
    - Uses `useParams()` to get the event ID from the URL
    - Uses `useCanonicalEventDetail(id)` hook
    - Shows loading and error states
    - Layout sections (stacked vertically):

      **Section 1: Header**
      - Title (large)
      - Badges: source_count ("X sources"), match_confidence (percentage), needs_review (if true)
      - Back link to list: `<Link to="/">Back to list</Link>` (or use `useNavigate` with -1)

      **Section 2: Event Details** (UI-02)
      - Two-column layout on desktop
      - Left: description (full), short_description, highlights (as bullet list)
      - Right: location (name, city, district, street, zipcode), geo coordinates, dates (formatted), categories (badges), flags (family event, child-focused, admission free)
      - Field provenance: show which source contributed each field as subtle text under field values (e.g., "from pdf-aaa-0-0")

      **Section 3: Source Events** (UI-03)
      - Section heading: "Source Events ({count})"
      - Render `<SourceComparison sources={detail.sources} />`

      **Section 4: Match Confidence** (UI-04)
      - Section heading: "Match Scores"
      - Render `<ConfidenceIndicator decisions={detail.match_decisions} sourceIds={detail.sources.map(s => s.id)} />`

    - Handle 404 (API returns error): show "Event not found" message with link back to list
  </action>
  <verify>
    <automated>cd /Users/svenkarl/workspaces/event-deduplication/frontend && npm run build 2>&1 | tail -5</automated>
  </verify>
  <done>
    - EventList shows searchable, filterable, paginated table of canonical events (UI-01)
    - EventDetail shows all canonical event fields in structured layout (UI-02)
    - SourceComparison shows side-by-side source events in card grid (UI-03)
    - ConfidenceIndicator shows per-pair signal scores with visual bars (UI-04)
    - SearchFilters provides inputs for q, city, date_from, date_to, category
    - Pagination shows page navigation with total count
    - All components use Tailwind CSS for styling
    - `npm run build` succeeds without TypeScript or build errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Docker infrastructure -- Dockerfile.frontend, nginx.conf, docker-compose update</name>
  <files>
    docker/Dockerfile.frontend
    docker/nginx.conf
    docker-compose.yml
  </files>
  <action>
    **1. Create `docker/Dockerfile.frontend`** (multi-stage build):

    ```dockerfile
    # Stage 1: Build React app
    FROM node:22-alpine AS builder
    WORKDIR /app
    COPY frontend/package*.json ./
    RUN npm ci
    COPY frontend/ .
    RUN npm run build

    # Stage 2: Serve with Nginx
    FROM nginx:alpine
    COPY docker/nginx.conf /etc/nginx/conf.d/default.conf
    COPY --from=builder /app/dist /usr/share/nginx/html
    EXPOSE 80
    CMD ["nginx", "-g", "daemon off;"]
    ```

    **2. Create `docker/nginx.conf`**:

    ```nginx
    server {
        listen 80;
        server_name _;

        # React SPA -- serve static files, fallback to index.html for client-side routing
        location / {
            root /usr/share/nginx/html;
            try_files $uri $uri/ /index.html;
        }

        # API reverse proxy to FastAPI container
        location /api/ {
            proxy_pass http://api:8000/api/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # Health check passthrough
        location /health {
            proxy_pass http://api:8000/health;
        }

        # OpenAPI docs passthrough (useful for development)
        location /docs {
            proxy_pass http://api:8000/docs;
        }
        location /openapi.json {
            proxy_pass http://api:8000/openapi.json;
        }
    }
    ```

    **3. Update `docker-compose.yml`** -- replace the placeholder frontend service:

    Change the `frontend` service from the nginx placeholder to a real build:

    ```yaml
    frontend:
      build:
        context: .
        dockerfile: docker/Dockerfile.frontend
      ports:
        - "3000:80"
      depends_on:
        - api
    ```

    Remove the `volumes` mount for `nginx-placeholder.html` since we now build the real frontend.
    Keep the existing `db`, `worker`, and `api` services unchanged.

    **4. Add `frontend/` to `.dockerignore`** -- but actually the frontend Dockerfile needs the frontend/ directory. Make sure the main `.dockerignore` does NOT exclude `frontend/`. However, add `frontend/node_modules` and `frontend/dist` to `.dockerignore` to avoid sending large build caches to Docker:

    Check if `.dockerignore` exists. If so, add:
    ```
    frontend/node_modules
    frontend/dist
    ```

    If it does not exist, create it with sensible defaults:
    ```
    .venv
    __pycache__
    *.pyc
    .git
    .planning
    .claude
    frontend/node_modules
    frontend/dist
    dead_letters
    eventdata
    *.db
    ```

    **5. Keep `docker/nginx-placeholder.html`** -- do not delete it, it is harmless and might be useful as a reference.
  </action>
  <verify>
    <automated>cd /Users/svenkarl/workspaces/event-deduplication && test -f docker/Dockerfile.frontend && test -f docker/nginx.conf && grep -q "Dockerfile.frontend" docker-compose.yml && echo "Docker files OK"</automated>
  </verify>
  <done>
    - Dockerfile.frontend exists with multi-stage build (Node + Nginx)
    - nginx.conf proxies /api/ to api:8000 and serves React SPA with try_files fallback
    - docker-compose.yml frontend service uses Dockerfile.frontend instead of placeholder
    - .dockerignore excludes node_modules and dist to keep Docker context small
    - `docker-compose build frontend` would succeed (if Node/Docker available)
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` -- React app builds without errors
2. `cd frontend && npx tsc --noEmit` -- TypeScript check passes
3. Verify all component files exist: EventList.tsx, EventDetail.tsx, SourceComparison.tsx, ConfidenceIndicator.tsx, SearchFilters.tsx, Pagination.tsx
4. `test -f docker/Dockerfile.frontend && test -f docker/nginx.conf` -- Docker files exist
5. `grep "Dockerfile.frontend" docker-compose.yml` -- docker-compose references the new Dockerfile
6. `grep "proxy_pass.*api:8000" docker/nginx.conf` -- Nginx proxies to API
</verification>

<success_criteria>
- React app builds successfully with `npm run build`
- EventList component implements searchable paginated list with filters (UI-01)
- EventDetail component shows all canonical event fields (UI-02)
- SourceComparison component shows side-by-side source events (UI-03)
- ConfidenceIndicator component shows per-pair signal scores with visual bars (UI-04)
- TanStack Query handles data fetching, caching, and pagination state
- React Router provides navigation between list and detail views
- Nginx config proxies /api/ to FastAPI and serves React SPA with try_files
- Dockerfile.frontend uses multi-stage build (Node build + Nginx serve)
- docker-compose.yml updated with real frontend build
</success_criteria>

<output>
After completion, create `.planning/phases/04/04-02-SUMMARY.md`
</output>
